spring:
  application:
    name: bank-channel

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    # 기본값 추가 (환경변수 미설정 시 테스트에서 contextLoads 가능하도록)
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:test}?serverTimezone=Asia/Seoul
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:1234}

  jpa:
    show_sql: true
    properties:
      hibernate:
        format_sql: true
    hibernate:
      # 기본값 추가
      ddl-auto: ${DDL_AUTO:none}
    database-platform: org.hibernate.dialect.MySQLDialect

# 로그 패턴 설정 (MDC의 traceId 포함)
logging:
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss} [%X{traceId}] %-5level %logger{36} - %msg%n'
  level:
    # Feign Client 로깅 (개발: DEBUG, 운영: INFO)
    com.bank.channel.baas.service.AccountSystemClient: DEBUG
# Feign Client에서 사용되는 URL
external:
  api:
    account-system:
      # 기본값 추가
      url: ${ACCOUNT_SERVER_URL:http://localhost:18080}

cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000}